<!DOCTYPE html>
<html lang="en">
<!-- scientific calculator v5.0 - Modern Redesign -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Scientific Calculator</title>
    <style>
        :root {
            --primary-color: #6c5ce7;
            --primary-dark: #5649c0;
            --accent-color: #00cec9;
            --text-color: #f5f6fa;
            --text-secondary: #b2bec3;
            --bg-color: #1a1a2e;
            --button-bg: rgba(44, 44, 84, 0.7);
            --button-hover: rgba(67, 67, 122, 0.7);
            --button-active: rgba(108, 92, 231, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --max-width: 28rem;
            font-size: 16px;
        }

        /* ------------- fonts ---------------- */
        @font-face {
            font-family: 'Charm';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: url(fonts/charm.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }

        @font-face {
            font-family: 'Inter';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: url(fonts/inter.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }

        @font-face {
            font-family: 'Fira Code';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: url(fonts/fira-code.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }

        /* ----------- css styles ------------ */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(108, 92, 231, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 206, 201, 0.1) 0%, transparent 20%);
        }

        .calculator-container {
            width: 100%;
            max-width: var(--max-width);
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            overflow: hidden;
            padding: 1.5rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-color);
        }

        .mode-toggle {
            background: var(--button-bg);
            border: none;
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-toggle:hover {
            background: var(--button-hover);
        }

        .display {
            background: rgba(44, 44, 84, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: right;
            min-height: 5rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .history {
            font-size: 1rem;
            color: var(--text-secondary);
            min-height: 1.5rem;
            overflow-x: auto;
            white-space: nowrap;
            margin-bottom: 0.5rem;
        }

        .history::-webkit-scrollbar {
            height: 3px;
        }

        .history::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }

        .current-input {
            font-size: 2.5rem;
            font-weight: 500;
            overflow-x: auto;
            white-space: nowrap;
        }

        .current-input::-webkit-scrollbar {
            height: 3px;
        }

        .current-input::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }

        .exponential {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.3rem;
            text-align: right;
        }

        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.8rem;
        }

        .button {
            background: var(--button-bg);
            color: var(--text-color);
            border: none;
            border-radius: 12px;
            padding: 1rem 0;
            font-size: 1.2rem;
            font-family: 'Fira Code', monospace;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .button:active::after {
            animation: ripple 0.6s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .button:hover {
            background: var(--button-hover);
            transform: translateY(-2px);
        }

        .button:active {
            transform: translateY(0);
            background: var(--button-active);
        }

        .button.operation {
            color: var(--accent-color);
            font-weight: 500;
        }

        .button.function {
            color: var(--primary-color);
            font-size: 1rem;
        }

        .button.equals {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        .button.equals:hover {
            background: var(--primary-dark);
        }

        .button.clear {
            color: #ff7675;
        }

        .button.double {
            grid-column: span 2;
        }

        .trig-dropdown {
            position: relative;
            grid-column: span 4;
        }

        .trig-toggle {
            width: 100%;
            background: var(--button-bg);
            color: var(--text-color);
            border: none;
            border-radius: 12px;
            padding: 0.8rem;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .trig-toggle:hover {
            background: var(--button-hover);
        }

        .trig-menu {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: var(--button-bg);
            border-radius: 12px;
            margin-top: 0.5rem;
            padding: 0.8rem;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
        }

        .trig-dropdown.active .trig-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .trig-option {
            padding: 0.5rem;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .trig-option:hover {
            background: var(--button-hover);
        }

        sup, sub {
            font-size: 0.7em;
            line-height: 1;
        }

        .power-button {
            position: relative;
        }

        .power-symbol {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.8em;
        }

        @media screen and (max-width: 480px) {
            :root {
                font-size: 14px;
            }
            
            .calculator-container {
                padding: 1rem;
            }
            
            .button {
                padding: 0.8rem 0;
            }
        }

        @media screen and (min-width: 768px) {
            :root {
                font-size: 18px;
            }
        }
    </style>
</head>

<body>
    <div class="calculator-container">
        <div class="header">
            <div class="title">SCIENTIFIC CALCULATOR</div>
            <button class="mode-toggle" id="mode-toggle">DEG</button>
        </div>
        
        <div class="display">
            <div class="history" id="history"></div>
            <div class="current-input" id="display">0</div>
            <div class="exponential" id="exponential"></div>
        </div>
        
        <div class="buttons-grid">
            <div class="trig-dropdown" id="trig-dropdown">
                <button class="trig-toggle">
                    <span>Trigonometric Functions</span>
                    <span>▼</span>
                </button>
                <div class="trig-menu">
                    <div class="trig-option" data-fn="sin">sin</div>
                    <div class="trig-option" data-fn="cos">cos</div>
                    <div class="trig-option" data-fn="tan">tan</div>
                    <div class="trig-option" data-fn="cosec">cosec</div>
                    <div class="trig-option" data-fn="sec">sec</div>
                    <div class="trig-option" data-fn="cot">cot</div>
                    <div class="trig-option" data-fn="asin">sin⁻¹</div>
                    <div class="trig-option" data-fn="acos">cos⁻¹</div>
                    <div class="trig-option" data-fn="atan">tan⁻¹</div>
                </div>
            </div>
            
            <button class="button function" id="sqrt">√x</button>
            <button class="button function" id="cbrt">∛x</button>
            <button class="button function" id="log">log</button>
            <button class="button function" id="ln">ln</button>
            
            <button class="button function" id="pi">π</button>
            <button class="button function" id="exp">e</button>
            <button class="button function" id="pow">x^y</button>
            <button class="button function" id="square">x²</button>
            
            <button class="button function" id="inverse">x⁻¹</button>
            <button class="button function" id="fact">x!</button>
            <button class="button function" id="percent">%</button>
            <button class="button operation" id="divide">÷</button>
            
            <button class="button" id="seven">7</button>
            <button class="button" id="eight">8</button>
            <button class="button" id="nine">9</button>
            <button class="button operation" id="multiply">×</button>
            
            <button class="button" id="four">4</button>
            <button class="button" id="five">5</button>
            <button class="button" id="six">6</button>
            <button class="button operation" id="subtract">−</button>
            
            <button class="button" id="one">1</button>
            <button class="button" id="two">2</button>
            <button class="button" id="three">3</button>
            <button class="button operation" id="add">+</button>
            
            <button class="button" id="zero">0</button>
            <button class="button" id="decimal">.</button>
            <button class="button" id="ans">ANS</button>
            <button class="button operation" id="equals">=</button>
            
            <button class="button clear" id="clear">AC</button>
            <button class="button clear" id="delete">DEL</button>
            <button class="button" id="open-paren">(</button>
            <button class="button" id="close-paren">)</button>
        </div>
    </div>

    <script>
        // DOM Elements
        const display = document.getElementById('display');
        const historyDisplay = document.getElementById('history');
        const exponentialDisplay = document.getElementById('exponential');
        const modeToggle = document.getElementById('mode-toggle');
        const trigDropdown = document.getElementById('trig-dropdown');
        
        // Button collections
        const numberButtons = document.querySelectorAll('.buttons-grid .button:not(.operation):not(.function):not(.clear):not(#equals):not(#open-paren):not(#close-paren):not(#ans)');
        const operationButtons = document.querySelectorAll('.button.operation');
        const functionButtons = document.querySelectorAll('.button.function');
        const clearButton = document.getElementById('clear');
        const deleteButton = document.getElementById('delete');
        const equalsButton = document.getElementById('equals');
        const ansButton = document.getElementById('ans');
        const parenButtons = [document.getElementById('open-paren'), document.getElementById('close-paren')];
        const trigOptions = document.querySelectorAll('.trig-option');
        
        // Calculator state
        let currentInput = '0';
        let calculationHistory = '';
        let lastAnswer = null;
        let isDegreeMode = true;
        let waitingForOperand = false;
        
        // Initialize calculator
        function init() {
            updateDisplay();
            
            // Event listeners
            numberButtons.forEach(button => {
                button.addEventListener('click', () => appendNumber(button.textContent));
            });
            
            operationButtons.forEach(button => {
                button.addEventListener('click', () => appendOperator(button.textContent));
            });
            
            functionButtons.forEach(button => {
                button.addEventListener('click', () => handleFunction(button.id));
            });
            
            clearButton.addEventListener('click', clearAll);
            deleteButton.addEventListener('click', deleteLastChar);
            equalsButton.addEventListener('click', calculateResult);
            ansButton.addEventListener('click', appendAns);
            parenButtons.forEach(button => {
                button.addEventListener('click', () => appendParenthesis(button.textContent));
            });
            
            modeToggle.addEventListener('click', toggleMode);
            
            trigDropdown.querySelector('.trig-toggle').addEventListener('click', () => {
                trigDropdown.classList.toggle('active');
            });
            
            trigOptions.forEach(option => {
                option.addEventListener('click', () => {
                    const fn = option.getAttribute('data-fn');
                    appendTrigFunction(fn);
                    trigDropdown.classList.remove('active');
                });
            });
            
            // Keyboard support
            document.addEventListener('keydown', handleKeyPress);
        }
        
        // Update display
        function updateDisplay() {
            display.textContent = currentInput;
            historyDisplay.textContent = calculationHistory;
        }
        
        // Append number to current input
        function appendNumber(number) {
            if (waitingForOperand) {
                currentInput = number;
                waitingForOperand = false;
            } else {
                currentInput = currentInput === '0' ? number : currentInput + number;
            }
            updateDisplay();
        }
        
        // Append operator
        function appendOperator(operator) {
            const ops = {'+': '+', '−': '-', '×': '*', '÷': '/'};
            const opSymbol = ops[operator] || operator;
            
            if (waitingForOperand) {
                calculationHistory = calculationHistory.slice(0, -1) + opSymbol;
            } else {
                calculationHistory += currentInput + opSymbol;
                waitingForOperand = true;
            }
            
            updateDisplay();
        }
        
        // Handle special functions
        function handleFunction(funcId) {
            let fnExpression = '';
            
            switch(funcId) {
                case 'sqrt':
                    fnExpression = '√(';
                    break;
                case 'cbrt':
                    fnExpression = 'Math.cbrt(';
                    break;
                case 'log':
                    fnExpression = 'Math.log10(';
                    break;
                case 'ln':
                    fnExpression = 'Math.log(';
                    break;
                case 'pi':
                    fnExpression = 'Math.PI';
                    break;
                case 'exp':
                    fnExpression = 'Math.E';
                    break;
                case 'pow':
                    fnExpression = 'Math.pow(,';
                    break;
                case 'square':
                    fnExpression = 'Math.pow(,2)';
                    break;
                case 'inverse':
                    fnExpression = '1/';
                    break;
                case 'fact':
                    fnExpression = 'factorial(';
                    break;
                case 'percent':
                    fnExpression = '/100';
                    break;
            }
            
            if (waitingForOperand) {
                calculationHistory += fnExpression;
            } else {
                calculationHistory += currentInput + fnExpression;
                waitingForOperand = true;
            }
            
            updateDisplay();
        }
        
        // Append trigonometric function
        function appendTrigFunction(fn) {
            let fnExpression = '';
            
            switch(fn) {
                case 'sin':
                    fnExpression = 'trigSin(';
                    break;
                case 'cos':
                    fnExpression = 'trigCos(';
                    break;
                case 'tan':
                    fnExpression = 'trigTan(';
                    break;
                case 'cosec':
                    fnExpression = '1/trigSin(';
                    break;
                case 'sec':
                    fnExpression = '1/trigCos(';
                    break;
                case 'cot':
                    fnExpression = '1/trigTan(';
                    break;
                case 'asin':
                    fnExpression = 'trigAsin(';
                    break;
                case 'acos':
                    fnExpression = 'trigAcos(';
                    break;
                case 'atan':
                    fnExpression = 'trigAtan(';
                    break;
            }
            
            if (waitingForOperand) {
                calculationHistory += fnExpression;
            } else {
                calculationHistory += currentInput + fnExpression;
                waitingForOperand = true;
            }
            
            updateDisplay();
        }
        
        // Append parenthesis
        function appendParenthesis(paren) {
            if (waitingForOperand) {
                calculationHistory += paren;
            } else {
                calculationHistory += currentInput + paren;
                waitingForOperand = true;
            }
            updateDisplay();
        }
        
        // Append last answer
        function appendAns() {
            if (lastAnswer !== null) {
                if (waitingForOperand) {
                    currentInput = lastAnswer.toString();
                    waitingForOperand = false;
                } else {
                    currentInput = currentInput === '0' ? lastAnswer.toString() : currentInput + lastAnswer.toString();
                }
                updateDisplay();
            }
        }
        
        // Clear all
        function clearAll() {
            currentInput = '0';
            calculationHistory = '';
            waitingForOperand = false;
            exponentialDisplay.textContent = '';
            updateDisplay();
        }
        
        // Delete last character
        function deleteLastChar() {
            if (currentInput.length > 1) {
                currentInput = currentInput.slice(0, -1);
            } else {
                currentInput = '0';
            }
            updateDisplay();
        }
        
        // Toggle degree/radian mode
        function toggleMode() {
            isDegreeMode = !isDegreeMode;
            modeToggle.textContent = isDegreeMode ? 'DEG' : 'RAD';
        }
        
        // Trigonometric functions with mode support
        function trigSin(angle) {
            return isDegreeMode ? Math.sin(angle * Math.PI / 180) : Math.sin(angle);
        }
        
        function trigCos(angle) {
            return isDegreeMode ? Math.cos(angle * Math.PI / 180) : Math.cos(angle);
        }
        
        function trigTan(angle) {
            return isDegreeMode ? Math.tan(angle * Math.PI / 180) : Math.tan(angle);
        }
        
        function trigAsin(value) {
            const result = Math.asin(value);
            return isDegreeMode ? result * 180 / Math.PI : result;
        }
        
        function trigAcos(value) {
            const result = Math.acos(value);
            return isDegreeMode ? result * 180 / Math.PI : result;
        }
        
        function trigAtan(value) {
            const result = Math.atan(value);
            return isDegreeMode ? result * 180 / Math.PI : result;
        }
        
        // Factorial function
        function factorial(n) {
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }
        
        // Calculate result
        function calculateResult() {
            try {
                // Add current input to history if not waiting for operand
                if (!waitingForOperand) {
                    calculationHistory += currentInput;
                }
                
                // Prepare the expression for evaluation
                let expression = calculationHistory
                    .replace(/√/g, 'Math.sqrt')
                    .replace(/\^/g, '**');
                
                // Evaluate the expression
                const result = eval(expression);
                
                // Handle exponential notation
                if (result.toString().includes('e')) {
                    const [base, exponent] = result.toString().split('e');
                    currentInput = base;
                    exponentialDisplay.textContent = exponent;
                } else {
                    currentInput = result.toString();
                    exponentialDisplay.textContent = '';
                }
                
                lastAnswer = result;
                calculationHistory = '';
                waitingForOperand = false;
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }
        
        // Handle keyboard input
        function handleKeyPress(e) {
            const key = e.key;
            
            if (/[0-9]/.test(key)) {
                const button = document.getElementById(
                    key === '0' ? 'zero' : 
                    key === '1' ? 'one' : 
                    key === '2' ? 'two' : 
                    key === '3' ? 'three' : 
                    key === '4' ? 'four' : 
                    key === '5' ? 'five' : 
                    key === '6' ? 'six' : 
                    key === '7' ? 'seven' : 
                    key === '8' ? 'eight' : 'nine'
                );
                button.click();
            } else if (key === '.') {
                document.getElementById('decimal').click();
            } else if (key === '+' || key === '-' || key === '*' || key === '/') {
                const button = document.getElementById(
                    key === '+' ? 'add' : 
                    key === '-' ? 'subtract' : 
                    key === '*' ? 'multiply' : 'divide'
                );
                button.click();
            } else if (key === 'Enter' || key === '=') {
                document.getElementById('equals').click();
            } else if (key === 'Backspace') {
                document.getElementById('delete').click();
            } else if (key === 'Escape') {
                document.getElementById('clear').click();
            } else if (key === '(') {
                document.getElementById('open-paren').click();
            } else if (key === ')') {
                document.getElementById('close-paren').click();
            } else if (key.toLowerCase() === 'a') {
                document.getElementById('ans').click();
            }
        }
        
        // Initialize calculator
        init();
    </script>
</body>
</html>
